{
  "hash": "d5457cda2749abe0a80c367aca6f402c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Day 4: mydata\"\nauthor: Jen Richmond\ndate: 2025-11-04\nformat: html\neditor: source\ndraft: FALSE\nimage: places.png\nexecute:\n  freeze: true\n---\n\nInspired by [this bluesky post](https://bsky.app/profile/andrew.heiss.phd/post/3m4snm75k2k2c) from Andrew Heiss, today made a map of all the places I have lived. \n\n![](places.png)\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nlibrary(maps)\nlibrary(tidygeocoder)\nlibrary(ggeasy)\nlibrary(ggrepel)\n```\n:::\n\n\n\n# get basic map\n\nCode to get pacific centred map from [Free Range Stats](https://freerangestats.info/blog/2022/10/13/pacific-map)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nmp1 <- fortify(maps::map(fill=TRUE, plot=FALSE)) |>\n  as_tibble()\n\nmp2 <- mp1 |>\n  mutate(long = long + 360,\n         group = group + max(mp1$group) + 1)\n\nmp <- rbind(mp1, mp2) |>\n  filter(long > 100  & long <330 & lat <50 & lat > -60) \n\nggplot(mp) +\n  geom_polygon(aes(x = long, y = lat, group = group), fill = \"white\") +\n  coord_map() +\n  theme_bw() +\n  easy_remove_gridlines() +\n  easy_remove_axes() +\n    theme(panel.background = element_rect(fill = \"lightsteelblue\")) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n# add points/labels\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# tidygeocoder is magic! make a df of places, feed it to geocode() and it will add lat/long columns!\n\nplaces <- tibble::tribble(\n~name,                  ~places, ~period, ~order, \n\"uni\",          \"Dunedin, NZ\", \"2017-2004\", 1,\n\"postdoc\",  \"Minneapolis, MN\",     \"2004-2005\", 2,\n\"postdoc\",         \"Boston, MA\" , \"2005-2008\", 3, \n\"unsw\",         \"Sydney, Australia\"  ,\"2008-2022\", 4, \n\"home\",         \"Wanaka, NZ\" , \"2022-present\", 5\n)\n\nlat_longs <- places %>%\n  geocode(places, method = 'osm', lat = latitude , long = longitude) %>%\n  mutate(longitude = ifelse(longitude < 0, longitude + 360, longitude)) # transform to get pacific centred\n\n\n\nggplot(mp) +\n  geom_polygon(aes(x = long, y = lat, group = group), fill = \"white\") +\n   coord_map() +\n  geom_point(data = lat_longs, aes(x = longitude, y = latitude), \n           size = 2, color = \"black\", fill = \"black\", shape = 21, \n           inherit.aes = FALSE) +\n geom_text_repel(data = lat_longs, aes(x = longitude, y = latitude, label = places), size = 3) +\n  theme_bw() +\n  easy_remove_gridlines() +\n  easy_remove_axes() +\n    theme(panel.background = element_rect(fill = \"lightsteelblue\")) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## add lines/arrows\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\npairs <- lat_longs %>%\n  mutate(next_longitude = lead(longitude),\n    next_latitude = lead(latitude),\n    next_place = lead(places),\n    next_order = lead(order)) \n\n\nggplot(mp) +\n  geom_polygon(aes(x = long, y = lat, group = group), fill = \"white\") +\n   coord_map() +\n    geom_segment(data = pairs, \n             aes(x = longitude, y = latitude, xend = next_longitude, yend = next_latitude),\n             arrow = arrow(length = unit(0.3, \"cm\"), type = \"open\", ends = \"last\"),\n             linewidth = 0.5,\n             arrow.fill = NULL) +\n  geom_point(data = lat_longs, aes(x = longitude, y = latitude), \n           size = 2, color = \"black\", fill = \"black\", shape = 21, \n           inherit.aes = FALSE) +\n geom_text_repel(data = lat_longs, aes(x = longitude, y = latitude, label = places), size = 3) +\n  theme_bw() +\n  easy_remove_gridlines() +\n    easy_remove_axes() +\n    theme(panel.background = element_rect(fill = \"lightsteelblue\")) +\n  labs(title = \"Places I have lived\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n```\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}