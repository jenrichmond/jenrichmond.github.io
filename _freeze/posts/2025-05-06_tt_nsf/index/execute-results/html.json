{
  "hash": "a1458c75bb7c9a22f2184f1020c6178e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"nsf grants terminated\"\nformat: html\ndate: 2025-05-06\nauthor: Jen Richmond\n---\n\n\n\n\nThe TidyTuesday challenge this week comes from a crowdsourced dataset put together by [GrantWatch](https://grant-watch.us/) about the National Science Foundation grants that have been terminated this year by the Trump administration. The data includes information about the state from which the researchers were operating, as well as the award type and directorate, which gives a sense of the kind of research that is being targeted. \n\nI am particularly interested in the amount of grant funding that has been lost by state and the kinds of research grants that are being targeted by the administration. \n\n\n## read/clean data\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidytuesdayR)\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(scales)\nlibrary(usmap)\nlibrary(gt)\nlibrary(ggeasy)\nlibrary(patchwork)\n\ntuesdata <- tidytuesdayR::tt_load(2025, week = 18)\n\nnsf <- tuesdata$nsf_terminations\n\n\nstate_dir <- nsf %>%\n  select(state = org_state, usaspending_obligated, directorate_abbrev, directorate) %>%\n  mutate(directorate = str_remove_all(directorate, '[\"]'))\n```\n:::\n\n\n\n# funding terminated by state\n\nThe `usmap` package makes it pretty easy to plot values on a state map. Here I am grouping by state and summing the total amount of funding terminated and displaying those total values on the map. It is clear that California has been particularly impacted, with more than 70 million dollars worth of grants being lost in California alone.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\namount_by_state <- state_dir %>%\n  group_by(state) %>%\n  summarise(total = sum(usaspending_obligated, na.rm = TRUE)) %>%\n  arrange(desc(total))\n\noptions(scipen = 999)\n\nplot_usmap(data = amount_by_state, values = \"total\", labels=FALSE) +\n scale_fill_distiller(limits = c(0,80000000),\n    palette = \"Reds\",\n    direction = 1,\n    name = \"USD\", labels = unit_format(unit = \"M\", \n                                             scale = 1e-6)\n  ) +\n  easy_move_legend(to = c(\"right\")) +\n  labs(title = \"Value of NSF funding lost by state\", \n       subtitle = \"Research institutions in California have lost more than $70 million USD in NSF grant terminations\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-note}\n\nUpdate 2025-05-13: Libby Heeren made a great point on BlueSky last week about population. It is not necessarily surprising that CA, NY, and TX stick out on this map, because these are the most highly populated states. Check out her map that controls for population [here](https://bsky.app/profile/libbyheeren.bsky.social/post/3lonaphub4k2i)\n\n:::\n\n# number grants terminated by directorate\n\nNext I am interested in the number of grants that have been terminated across different directorates. It seems that \"STEM Education\" and \"Social, Behavioural and Economic sciences\" grants, account for more than 65% of the grants that have been cut. \n\n\n::: panel-tabset\n\n### plot\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ncount_by_directorate <- state_dir %>%\n  tabyl(directorate) %>%\n  mutate(percent = round(percent * 100, 2)) %>%\n  select(-valid_percent) %>%\n  arrange(-n) \n\ncount_by_directorate %>%\n  na.omit() %>%\n  ggplot(aes(x = reorder(directorate, percent), \n             y = percent, fill = directorate)) +\n  geom_col() +\n  coord_flip() +\n  theme_minimal() +\n  easy_remove_legend() +\n     scale_fill_brewer(palette = \"Spectral\") +\n  scale_y_continuous(limits = c(0,50)) +\n  labs(x = \"Directorate\", y = \"Percent\", \n       title = \"Percent of grant terminations by research directorate\") +\n  theme(\n    plot.title = element_text(hjust = 0.2),  # Left align the title\n    plot.title.position = \"plot\"  # Position at the \"plot\" level rather than \"panel\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n### table\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ngt(count_by_directorate)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hewyqgygth\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hewyqgygth table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hewyqgygth thead, #hewyqgygth tbody, #hewyqgygth tfoot, #hewyqgygth tr, #hewyqgygth td, #hewyqgygth th {\n  border-style: none;\n}\n\n#hewyqgygth p {\n  margin: 0;\n  padding: 0;\n}\n\n#hewyqgygth .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hewyqgygth .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hewyqgygth .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hewyqgygth .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hewyqgygth .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hewyqgygth .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hewyqgygth .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hewyqgygth .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hewyqgygth .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hewyqgygth .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hewyqgygth .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hewyqgygth .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hewyqgygth .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hewyqgygth .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hewyqgygth .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hewyqgygth .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hewyqgygth .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hewyqgygth .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hewyqgygth .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hewyqgygth .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hewyqgygth .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hewyqgygth .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hewyqgygth .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hewyqgygth .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hewyqgygth .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hewyqgygth .gt_left {\n  text-align: left;\n}\n\n#hewyqgygth .gt_center {\n  text-align: center;\n}\n\n#hewyqgygth .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hewyqgygth .gt_font_normal {\n  font-weight: normal;\n}\n\n#hewyqgygth .gt_font_bold {\n  font-weight: bold;\n}\n\n#hewyqgygth .gt_font_italic {\n  font-style: italic;\n}\n\n#hewyqgygth .gt_super {\n  font-size: 65%;\n}\n\n#hewyqgygth .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hewyqgygth .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hewyqgygth .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hewyqgygth .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hewyqgygth .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hewyqgygth .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hewyqgygth .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hewyqgygth .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hewyqgygth div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"directorate\">directorate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percent\">percent</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">STEM Education</td>\n<td headers=\"n\" class=\"gt_row gt_right\">416</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">39.96</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Social, Behavioral and Economic Sciences</td>\n<td headers=\"n\" class=\"gt_row gt_right\">266</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">25.55</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Engineering</td>\n<td headers=\"n\" class=\"gt_row gt_right\">94</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">9.03</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Computer and Information Science and Engineering</td>\n<td headers=\"n\" class=\"gt_row gt_right\">85</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">8.17</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Geosciences</td>\n<td headers=\"n\" class=\"gt_row gt_right\">51</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">4.90</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Biological Sciences</td>\n<td headers=\"n\" class=\"gt_row gt_right\">45</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">4.32</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Technology, Innovation and Partnerships</td>\n<td headers=\"n\" class=\"gt_row gt_right\">45</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">4.32</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Mathematical and Physical Sciences</td>\n<td headers=\"n\" class=\"gt_row gt_right\">30</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">2.88</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Office of the Director</td>\n<td headers=\"n\" class=\"gt_row gt_right\">7</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">0.67</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"n\" class=\"gt_row gt_right\">2</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">0.19</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n:::\n\n\n# amount of funding lost by directorate\n\nSTEM Education and SBE grants have clearly been targeted and that is even more apparent when we plot the amount of funding that has been terminated across each directorate. More than $300 million has been cut from STEM Education research. \n\n\n::: panel-tabset\n\n### plot\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\namount_by_directorate <- state_dir %>%\n  group_by(directorate) %>%\n  summarise(amount = sum(usaspending_obligated, na.rm = TRUE)) %>%\n  arrange(-amount)\n\n\n amount_by_directorate %>%\n  na.omit() %>%\n  ggplot(aes(x = reorder(directorate, amount), \n             y = amount, fill = directorate)) +\n  geom_col() +\n  coord_flip() +\n  theme_minimal() +\n  easy_remove_legend() +\n    scale_fill_brewer(palette = \"Spectral\") +\n  scale_y_continuous(labels = unit_format(unit = \"M\", scale = 1e-6)) +\n  labs(x = \"Directorate\", y = \"Funding $\", \n       title = \"Value of terminated grants (USD millions)\") +\n  theme(\n    plot.title = element_text(hjust = 0.2),  # Left align the title\n    plot.title.position = \"plot\"  # Position at the \"plot\" level rather than \"panel\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n### table\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ngt(amount_by_directorate)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"omfyhmrimd\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#omfyhmrimd table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#omfyhmrimd thead, #omfyhmrimd tbody, #omfyhmrimd tfoot, #omfyhmrimd tr, #omfyhmrimd td, #omfyhmrimd th {\n  border-style: none;\n}\n\n#omfyhmrimd p {\n  margin: 0;\n  padding: 0;\n}\n\n#omfyhmrimd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#omfyhmrimd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#omfyhmrimd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#omfyhmrimd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#omfyhmrimd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#omfyhmrimd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#omfyhmrimd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#omfyhmrimd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#omfyhmrimd .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#omfyhmrimd .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#omfyhmrimd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#omfyhmrimd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#omfyhmrimd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#omfyhmrimd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#omfyhmrimd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#omfyhmrimd .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#omfyhmrimd .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#omfyhmrimd .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#omfyhmrimd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#omfyhmrimd .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#omfyhmrimd .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#omfyhmrimd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#omfyhmrimd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#omfyhmrimd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#omfyhmrimd .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#omfyhmrimd .gt_left {\n  text-align: left;\n}\n\n#omfyhmrimd .gt_center {\n  text-align: center;\n}\n\n#omfyhmrimd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#omfyhmrimd .gt_font_normal {\n  font-weight: normal;\n}\n\n#omfyhmrimd .gt_font_bold {\n  font-weight: bold;\n}\n\n#omfyhmrimd .gt_font_italic {\n  font-style: italic;\n}\n\n#omfyhmrimd .gt_super {\n  font-size: 65%;\n}\n\n#omfyhmrimd .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#omfyhmrimd .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#omfyhmrimd .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#omfyhmrimd .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#omfyhmrimd .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#omfyhmrimd .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#omfyhmrimd .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#omfyhmrimd .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#omfyhmrimd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"directorate\">directorate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"amount\">amount</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">STEM Education</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">321754856</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Social, Behavioral and Economic Sciences</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">77635904</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Technology, Innovation and Partnerships</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">61031310</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Computer and Information Science and Engineering</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">44630113</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Geosciences</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">35948981</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Engineering</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">33472485</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Biological Sciences</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">27511500</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Mathematical and Physical Sciences</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">6418312</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">Office of the Director</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">4859738</td></tr>\n    <tr><td headers=\"directorate\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">0</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\n## STEM & SBE by state \n\nI am interested in the state distribution of funding loss in STEM Education and Social, Behavioral, and Economic Sciences. This plot includes states that lost more than 10 million USD in STEM and SBE grants.  \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\namount_dir_state <- state_dir %>%\n  group_by(state, directorate) %>%\n  summarise(amount = sum(usaspending_obligated, na.rm = TRUE)) %>%\n  ungroup()\n\n\nstem_sbe <- amount_dir_state %>%\n  filter(directorate %in% c(\"STEM Education\", \"Social, Behavioral and Economic Sciences\")) %>%\n  group_by(state) %>%\n  mutate(total_stem_sbe = sum(amount)) %>%\n  arrange(-total_stem_sbe) \n\n\nstem_sbe %>%\n  filter(total_stem_sbe > 10000000) %>%\n  ggplot(aes(x = reorder(state, -total_stem_sbe), y = amount, fill = directorate)) +\n  geom_col() +\n  scale_y_continuous(limits = c(0,60000000), labels = unit_format(unit = \"M\", scale = 1e-6)) +\ntheme_minimal() +\n  easy_add_legend_title(\"Directorate\") +\n  easy_move_legend(to = c(\"bottom\")) +\n    scale_fill_brewer(palette = \"Set1\") +\n  labs(x = \"State\", y = \"Funding $\", \n       title = \"Value of STEM Education & Social, Behavioral, and Economic Sciences funding \\nterminated by state\", subtitle = \"States that have lost more than 10 million in STEM & SBE grants\") \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n# STEM + SBE as percent of total\n\nI wonder across state what proportion of the total funding lost was STEM Education and SBE grants. Here I am creating a new dataframe that summarises the amount that each state lost in STEM and SBE grants and joining that to the amount_by_state dataframe. Then I am calculating what percent of funding lost in each state came from STEM and SBE grants and plotting that on a state map.  \n\n\nIn almost half of the US states, STEM Education and SBE grants accounted for more than 70% of grants lost. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nstem_sbe_by_state <- amount_dir_state %>%\n  filter(directorate %in% c(\"STEM Education\", \"Social, Behavioral and Economic Sciences\")) %>%\n  group_by(state) %>%\n  summarise(total_stem_sbe = sum(amount, na.rm = TRUE)) %>%\n  arrange(-total_stem_sbe) \n\nstem_sbe_total <- left_join(amount_by_state, stem_sbe_by_state, by = \"state\") \n\nstem_sbe_total <- stem_sbe_total %>%\n  rowwise() %>%\n  mutate(percent_stem_sbe = round((total_stem_sbe / total)*100, 2)) %>%\n  arrange(-percent_stem_sbe)\n\n\n\nplot_usmap(data = stem_sbe_total, values = \"percent_stem_sbe\", labels=FALSE) +\nscale_fill_distiller(\n    palette = \"YlOrRd\",\n    direction = 1,\n    name = \"Percent funding lost\\n(STEM+SBE/Total)\"\n  ) +\n  labs(title = \"STEM Education and Social, Behavioral & Economic Sciences grants have been targeted by the \\nTrump administration\", \n       subtitle = \"In 24 of 50 states, more than 70% of funding lost came from STEM and SBE directorates\") +\n  easy_move_legend(to = c(\"right\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}