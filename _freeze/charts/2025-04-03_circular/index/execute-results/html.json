{
  "hash": "806debfa70cd65d6604b13301c8cb0d8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"day 3 circular\"\nauthor:\n  - name: Jen Richmond\n    url: https://jenrichmond.github.io/\ndate: 2025-04-03\nformat: html\neditor: source\ndraft: FALSE\nimage: featured.png\nexecute:\n  freeze: true\n---\n\n\n\n\n# load packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(scales)\nlibrary(ggeasy)\nlibrary(ggannotate)\nlibrary(plotly)\n```\n:::\n\n\n\n[This plot](https://ourworldindata.org/grapher/countries-by-share-of-women-in-parliament) illustrates changing representation of women in government leadership. It is great that in 2024 fewer than 2% of governments have no women in leadership, but it is not amazing that fewer than 2% have 50% or more. I am wondering if I can look at this pattern across different areas of the world by making circular graphs in ggplot.\n\n\n<iframe src=\"https://ourworldindata.org/grapher/countries-by-share-of-women-in-parliament?tab=chart\" loading=\"lazy\" style=\"width: 100%; height: 600px; border: 0px none;\" allow=\"web-share; clipboard-write\"></iframe>\n\n\n### read in the data\n\nI am mostly interested in the current state of affairs so I read in the data from the owidapi, filter the data to only include 2024 and rename variables to make them more friendly.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshare <- read_csv(\"https://ourworldindata.org/grapher/countries-by-share-of-women-in-parliament.csv?v=1&csvType=full&useColumnShortNames=true\") %>%\n  clean_names()\n\n\n\nshare2024 <- share %>% \n  filter(year == 2024) %>%\n  select(-code) %>%\n  rename(number_0pct = num_countries_wom_parl_category_0pct_women, \n         number_0_10pct = num_countries_wom_parl_category_0_10pct_women,\n         number_10_20pct = num_countries_wom_parl_category_10_20pct_women, \n           number_20_30pct = num_countries_wom_parl_category_20_30pct_women, \n           number_30_40pct = num_countries_wom_parl_category_30_40pct_women, \n           number_40_50pct = num_countries_wom_parl_category_40_50pct_women,\n           number_50pluspct = num_countries_wom_parl_category_50pctplus_women) \n\nglimpse(share2024)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 7\nColumns: 9\n$ entity           <chr> \"Africa\", \"Asia\", \"Europe\", \"North America\", \"Oceaniaâ€¦\n$ year             <dbl> 2024, 2024, 2024, 2024, 2024, 2024, 2024\n$ number_0pct      <dbl> 0, 2, 0, 0, 0, 0, 2\n$ number_0_10pct   <dbl> 4, 7, 0, 0, 4, 0, 15\n$ number_10_20pct  <dbl> 17, 16, 5, 1, 0, 1, 40\n$ number_20_30pct  <dbl> 15, 11, 11, 6, 0, 3, 46\n$ number_30_40pct  <dbl> 10, 5, 15, 3, 1, 5, 39\n$ number_40_50pct  <dbl> 5, 2, 10, 2, 1, 3, 23\n$ number_50pluspct <dbl> 1, 0, 0, 2, 0, 0, 3\n```\n\n\n:::\n:::\n\n\n\n## clean it up\nI want to plot data for the World and each region separately so create separate dataframes here using `filter()`. I also want to make the data long using `pivot_longer`, mutate new variables that represent the number of countries as percent, improve the labels on the percent categories and make them a factor so that they order correctly in my plot. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create world dataframe\n\nshare2024_world <- share2024 %>%\n  filter(entity == \"World\") %>%\n  pivot_longer(names_to = \"category\", values_to = \"number\", number_0pct:number_50pluspct) %>%\n    mutate(total = sum(number), percent = number/total) %>%\n           mutate(percent_women = case_when(category == \"number_0pct\" ~ \"no women\", \n                           category == \"number_0_10pct\" ~ \"less than 10%\",\n                           category == \"number_10_20pct\" ~ \"10-20%\", \n                           category == \"number_20_30pct\" ~ \"20-30%\", \n                           category == \"number_30_40pct\" ~ \"30-40%\", \n                           category == \"number_40_50pct\" ~ \"40-50%\",\n                           category == \"number_50pluspct\" ~ \"50+%\")) %>%\n    mutate(percent_women = fct_relevel(percent_women, \n                            c(\"no women\" , \"less than 10%\" ,\"10-20%\" ,\n                              \"20-30%\" ,\"30-40%\" , \"40-50%\" ,\n                              \"50+%\"))) \n\n# create regions dataframe\n\nshare2024_regions <- share2024 %>%\n  filter(entity != \"World\") %>%\n  pivot_longer(names_to = \"category\", values_to = \"number\", number_0pct:number_50pluspct) %>%\n  group_by(entity) %>%\n    mutate(total = sum(number), percent = number/total) %>%\n           mutate(percent_women = case_when(category == \"number_0pct\" ~ \"no women\", \n                           category == \"number_0_10pct\" ~ \"less than 10%\",\n                           category == \"number_10_20pct\" ~ \"10-20%\", \n                           category == \"number_20_30pct\" ~ \"20-30%\", \n                           category == \"number_30_40pct\" ~ \"30-40%\", \n                           category == \"number_40_50pct\" ~ \"40-50%\",\n                           category == \"number_50pluspct\" ~ \"50+%\")) %>%\n    mutate(percent_women = fct_relevel(percent_women, \n                            c(\"no women\" , \"less than 10%\" ,\"10-20%\" ,\n                              \"20-30%\" ,\"30-40%\" , \"40-50%\" ,\n                              \"50+%\"))) \n```\n:::\n\n\n\n## plot \n\n### world\n\nStarting with world and using inspo from the [R Graph gallery](https://r-graph-gallery.com/pie-plot.html) here I make an ugly pie chart. There is no pie geom in ggplot, so the workaround is to make a column chart and use `coord_polar()` to make it circular.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshare2024_world %>%\n  ggplot(aes(x = \"\", y = percent, fill = percent_women)) +\n  geom_col(colour = \"white\") +\n coord_polar(\"y\", start = 0) +\n    theme_void() +\n  easy_add_legend_title(\"Percent seats\") +\n  scale_fill_manual(values = c(\"#a2559b\", \"#00847d\", \"#4b6a9c\", \"#e56e59\", \"#38aaba\", \"#6b3d8d\",  \"#986d39\" )) +\n  labs(title = \"Percent of countries by share of women in parliament in 2024, World\", \n       subtitle = \"Percent of seats in lower or single chamber of the legislature held by women\", \n       caption = \"Data source: V-Dem (2025) via OurWorldInData. \\nNote: Only countries with at least one legislative chamber included.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\nThe more interesting question is does this pattern of representation differ across regions?\n\n### regions \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshare2024_regions %>%\n  ggplot(aes(x = \"\", y = percent, fill = percent_women)) +\n  geom_col(colour = \"white\") +\n coord_polar(\"y\", start = 0) +\n  facet_wrap(~entity) +\n    scale_fill_manual(values = c(\"#a2559b\", \"#00847d\", \"#4b6a9c\", \"#e56e59\", \"#38aaba\", \"#6b3d8d\",  \"#986d39\" )) +\n    theme_void() +\n   easy_add_legend_title(\"Percent seats\") +\nlabs(title = \"Percent of countries by share of women in parliament in 2024, Regions\", \n       subtitle = \"Percent of seats in lower or single chamber of the legislature held by women\", \n       caption = \"Data source: V-Dem (2025) via OurWorldInData. \\nNote: Only countries with at least one legislative chamber included.\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\nThere is a lot that surprises me about this plot. Oceania is not doing well; the majority of countries have less than 10% of government seats held by women. This dataset only includes the number of countries in each region that have women represented in each of the percent categories. This includes 6 Oceanic countries, but it doesn't include information about which 6 countries are included. I am interested to dig into the country level data here.  \n\nI was also surprised that Asia is the only region that still has 2 countries that have no women in government. Again, I am curious about which 2; Afghanistan maybe? Perhaps there are Middle East countries that do not have women in government. ",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}