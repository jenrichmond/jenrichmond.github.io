<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jen Richmond">
<meta name="dcterms.date" content="2025-04-01">

<title>day 1 fractions – Jen Richmond</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-905433ffa22618bb005779f2b23c5ce0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/iconify-2.1.0/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Y7WV5KV7Z0"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-Y7WV5KV7Z0', { 'anonymize_ip': true});
</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jen Richmond</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../charts.html"> 
<span class="menu-text">portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">projects</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jenrichmond"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jenrichmondphd/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/jenrichmondphd.bsky.social"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="fa6-brands:bluesky" style="font-size: 1.1em;" aria-label="Icon bluesky from fa6-brands Iconify.design set." title="Bluesky"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="mailto:jennyrichmond@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text">Email</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link active" data-scroll-target="#load-packages">load packages</a></li>
  <li><a href="#read-in-the-data" id="toc-read-in-the-data" class="nav-link" data-scroll-target="#read-in-the-data">read in the data</a></li>
  <li><a href="#clean-up-the-data" id="toc-clean-up-the-data" class="nav-link" data-scroll-target="#clean-up-the-data">clean up the data</a></li>
  <li><a href="#make-a-basic-plot" id="toc-make-a-basic-plot" class="nav-link" data-scroll-target="#make-a-basic-plot">make a basic plot</a></li>
  <li><a href="#gridlines-and-axes" id="toc-gridlines-and-axes" class="nav-link" data-scroll-target="#gridlines-and-axes">gridlines and axes</a></li>
  <li><a href="#colours-and-text" id="toc-colours-and-text" class="nav-link" data-scroll-target="#colours-and-text">colours and text</a></li>
  <li><a href="#interactivity" id="toc-interactivity" class="nav-link" data-scroll-target="#interactivity">interactivity</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">day 1 fractions</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jen Richmond </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="https://ourworldindata.org/grapher/willingness-climate-action">This plot</a> from Our World in Data illustrates the proportion of people who are willing to donate 1% of their income to climate change efforts as a function of people’s estimate of how many people in their country would be willing to donate.</p>
<p>As it turns out, people have a rather dim view of the likelihood that others would commit to supporting climate action. Lets see if we can reproduce the chart using ggplot.</p>
<iframe src="https://ourworldindata.org/grapher/willingness-climate-action?tab=chart" loading="lazy" style="width: 100%; height: 600px; border: 0px none;" allow="web-share; clipboard-write">
</iframe>
<section id="load-packages" class="level3">
<h3 class="anchored" data-anchor-id="load-packages">load packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggeasy)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-the-data">read in the data</h3>
<p>Here I am using the owidapi package to read in the data and reordering/renaming some variables before sorting the data by country and year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>willingness <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://ourworldindata.org/grapher/willingness-climate-action.csv?v=1&amp;csvType=full&amp;useColumnShortNames=true"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(entity, code, owid_region, year, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">prediction_others_willingness =</span> willingness_contribute_1pct_climate_others, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">self_willingness =</span> willingness_contribute_pct_climate) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">arrange</span>(entity, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 397 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): Entity, Code, owid_region
dbl (3): Year, willingness_contribute_1pct_climate_others, willingness_contr...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(willingness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 397
Columns: 6
$ entity                        &lt;chr&gt; "Afghanistan", "Afghanistan", "Aland Isl…
$ code                          &lt;chr&gt; "AFG", "AFG", "ALA", "ALB", "ALB", "DZA"…
$ owid_region                   &lt;chr&gt; "Asia", NA, "Europe", "Europe", NA, "Afr…
$ year                          &lt;dbl&gt; 2023, 2024, 2023, 2023, 2024, 2023, 2024…
$ prediction_others_willingness &lt;dbl&gt; NA, 40.5, NA, NA, 43.8, NA, 40.0, NA, NA…
$ self_willingness              &lt;dbl&gt; NA, 82.0, NA, NA, 71.3, NA, 54.6, NA, NA…</code></pre>
</div>
</div>
</section>
<section id="clean-up-the-data" class="level3">
<h3 class="anchored" data-anchor-id="clean-up-the-data">clean up the data</h3>
<p>Looks like the plot only includes 2024 data, so lets filter first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>willingness2024 <span class="ot">&lt;-</span> willingness <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2024</span>) </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(willingness2024)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 126
Columns: 6
$ entity                        &lt;chr&gt; "Afghanistan", "Albania", "Algeria", "Ar…
$ code                          &lt;chr&gt; "AFG", "ALB", "DZA", "ARG", "ARM", "AUS"…
$ owid_region                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ year                          &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024…
$ prediction_others_willingness &lt;dbl&gt; 40.5, 43.8, 40.0, 38.1, 40.7, 38.6, 37.9…
$ self_willingness              &lt;dbl&gt; 82.0, 71.3, 54.6, 62.2, 75.4, 56.1, 72.7…</code></pre>
</div>
</div>
<p>Unfortunately in filtering out the 2023 data, I have also lost information about the owid region, which is used in colouring the dots in the plot. I need to go back to the dataset that has regions for 2023 and have them propogate into the 2024 rows as well.</p>
<p>This chunk groups the data by country and then mutates a new column to contain new region values. It looks just at 2023 rows and pulls the first value of region from those. Then we can filter for just 2024 values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>willingness2024 <span class="ot">&lt;-</span> willingness <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(entity) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">first</span>(owid_region[year <span class="sc">==</span> <span class="dv">2023</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"entity"</span>), region, year, <span class="fu">ends_with</span>(<span class="st">"willingness"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2024</span>) </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(willingness2024)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 126
Columns: 5
Groups: entity [126]
$ entity                        &lt;chr&gt; "Afghanistan", "Albania", "Algeria", "Ar…
$ region                        &lt;chr&gt; "Asia", "Europe", "Africa", "South Ameri…
$ year                          &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024…
$ prediction_others_willingness &lt;dbl&gt; 40.5, 43.8, 40.0, 38.1, 40.7, 38.6, 37.9…
$ self_willingness              &lt;dbl&gt; 82.0, 71.3, 54.6, 62.2, 75.4, 56.1, 72.7…</code></pre>
</div>
</div>
</section>
<section id="make-a-basic-plot" class="level3">
<h3 class="anchored" data-anchor-id="make-a-basic-plot">make a basic plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>willingness2024 <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span>  prediction_others_willingness, <span class="at">x =</span> self_willingness)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Predicted share willing to give"</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Actual share who said they were willing to give 1% of their income"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>OK, basic plot success… things that I need to change</p>
<ul>
<li>axis values in 20% increments with %</li>
<li>theme needs to be white background with dotted gridlines on 20% values</li>
<li>diagonal dotted line</li>
<li>colour points by region</li>
<li>include text of selection of countries</li>
<li>caption re data source</li>
<li>title and subtitle</li>
<li>plotly interactivity</li>
</ul>
</section>
<section id="gridlines-and-axes" class="level3">
<h3 class="anchored" data-anchor-id="gridlines-and-axes">gridlines and axes</h3>
<p>Here I am using the expand and breaks arguments within <code>scale_y_continuou</code>s and <code>scale_x_continuous</code> to make the axis start at 0,0 and have 20% increments. I get % labels on each access using the <code>percent_format()</code> function from the <code>scales</code> package (accuracy = 1 tells R I want it to display whole numbers and scale = 1 tells R my numbers are already percentages and don’t need to be multiplied by 100).</p>
<p>I removed the minor gridlines using <code>easy_remove_gridlines()</code> from the <code>ggeasy package</code>. I also added a diagonal line using<code>geom_abline()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>willingness2024 <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span>  prediction_others_willingness, <span class="at">x =</span> self_willingness)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Predicted share willing to give"</span>, </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Actual share who said they were willing to give 1% of their income"</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()  <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">easy_remove_gridlines</span>(<span class="at">axis =</span> <span class="st">"both"</span>, <span class="at">minor =</span> <span class="cn">TRUE</span>, <span class="at">major =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="dv">1</span>, </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">intercept =</span> <span class="dv">0</span>, </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"grey"</span>, </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dotted"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="colours-and-text" class="level3">
<h3 class="anchored" data-anchor-id="colours-and-text">colours and text</h3>
<p>Adding colour by region makes me realise that there is a row that entity == World, which doesn’t have a region. I need to filtered the World out to avoid an NA category.</p>
<p>I want to use the same colours as the OWID plot. The <a href="https://chromewebstore.google.com/detail/colorzilla/bhlhnicpbhignbdhedgjhgdocnmhomnp">ColorZilla web extension</a> allows you to use a dropper to get the specific # codes for each colour on any plot on the internet- handy!</p>
<p>I have used <code>scale_colour_manual()</code> to set the colours and added a title and subtitle using labs and removed the legend title using a function from the <code>ggeasy</code> package. I have added some country labels, while trying to avoid overlapping the point using the <code>geom_text_repel()</code> function from the <code>ggrepel</code> package. It does give me a warning that there are too many overlapping points though.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>willingness2024 <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(entity <span class="sc">!=</span> <span class="st">"World"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span>  prediction_others_willingness, <span class="at">x =</span> self_willingness, <span class="at">colour =</span> region)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Predicted share willing to give"</span>, </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Actual share who said they were willing to give 1% of their income"</span>, </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"People underestimate others' willingness to take climate action"</span>, </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Participants were asked if they would contribute 1% of their income to tackle </span><span class="sc">\n</span><span class="st">climate change. </span><span class="sc">\n</span><span class="st">The share that answered 'yes' is shown on the horizontal axis. </span><span class="sc">\n</span><span class="st">The share of the population in their country that people think would be willing </span><span class="sc">\n</span><span class="st">is shown on the vertical axis."</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()  <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">easy_remove_gridlines</span>(<span class="at">axis =</span> <span class="st">"both"</span>, <span class="at">minor =</span> <span class="cn">TRUE</span>, <span class="at">major =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="dv">1</span>, </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">intercept =</span> <span class="dv">0</span>, </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"grey"</span>, </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#a2559b"</span>, <span class="st">"#00847d"</span>, <span class="st">"#4b6a9c"</span>, <span class="st">"#e56e59"</span>, <span class="st">"#38aaba"</span>, <span class="st">"#883039"</span>)) <span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">easy_remove_legend_title</span>() <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> entity), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactivity" class="level3">
<h3 class="anchored" data-anchor-id="interactivity">interactivity</h3>
<p>The <code>plotly</code> packages allows for much of the same kind of interactivity that the grapher tool allows on Our World in Data. Here I have added an extra text argument to the ggplot aes to make the hover option display the country associated with each point, as well as the variables that were mapped. By assigning the ggplot to an object and then using the <code>ggplotly()</code> function, we can produce an interactive plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> willingness2024 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(entity <span class="sc">!=</span> <span class="st">"World"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span>  prediction_others_willingness, <span class="at">x =</span> self_willingness, </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> region, <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"country:"</span>, entity))) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>), </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Predicted share willing to give"</span>, </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Actual share who said they were willing to give 1% of their income"</span>, </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"People underestimate others' willingness to take climate action"</span>, </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Participants were asked if they would contribute 1% of their income to tackle climate change. </span><span class="sc">\n</span><span class="st">The share that answered 'yes' is shown on the horizontal axis. The share of the population </span><span class="sc">\n</span><span class="st">in their country that people think would be willing is shown on the vertical axis."</span>) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()  <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="dv">1</span>, </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">intercept =</span> <span class="dv">0</span>, </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"grey"</span>, </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="sc">+</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#a2559b"</span>, <span class="st">"#00847d"</span>, <span class="st">"#4b6a9c"</span>, <span class="st">"#e56e59"</span>, <span class="st">"#38aaba"</span>, <span class="st">"#883039"</span>)) <span class="sc">+</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">easy_remove_legend_title</span>() </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>interactive_plot <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(plot)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>interactive_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3c52dd77f69fc05aef09" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3c52dd77f69fc05aef09">{"x":{"data":[{"x":[54.600000000000001,84.299999999999997,71.200000000000003,84.400000000000006,82.099999999999994,76.700000000000003,83.400000000000006,30.5,81.099999999999994,71.799999999999997,83.599999999999994,79,70.5,71.299999999999997,85.900000000000006,85.099999999999994,83,75.799999999999997,62.5,67.299999999999997,78.700000000000003,82.900000000000006,54.200000000000003,63.700000000000003,79.900000000000006,58.399999999999999,74.599999999999994,81.400000000000006,72.099999999999994],"y":[40,44,49,41.899999999999999,42.799999999999997,38.100000000000001,43.700000000000003,27.399999999999999,40.600000000000001,40.5,39.299999999999997,39.299999999999997,34.200000000000003,39.100000000000001,42.100000000000001,53.700000000000003,54,41.299999999999997,37.100000000000001,39.399999999999999,47.799999999999997,44.200000000000003,34.100000000000001,45,38.600000000000001,36.200000000000003,38.100000000000001,55.200000000000003,41.700000000000003],"text":["self_willingness: 54.6<br />prediction_others_willingness: 40.0<br />region: Africa<br />country: Algeria","self_willingness: 84.3<br />prediction_others_willingness: 44.0<br />region: Africa<br />country: Benin","self_willingness: 71.2<br />prediction_others_willingness: 49.0<br />region: Africa<br />country: Botswana","self_willingness: 84.4<br />prediction_others_willingness: 41.9<br />region: Africa<br />country: Burkina Faso","self_willingness: 82.1<br />prediction_others_willingness: 42.8<br />region: Africa<br />country: Cameroon","self_willingness: 76.7<br />prediction_others_willingness: 38.1<br />region: Africa<br />country: Congo","self_willingness: 83.4<br />prediction_others_willingness: 43.7<br />region: Africa<br />country: Cote d'Ivoire","self_willingness: 30.5<br />prediction_others_willingness: 27.4<br />region: Africa<br />country: Egypt","self_willingness: 81.1<br />prediction_others_willingness: 40.6<br />region: Africa<br />country: Gabon","self_willingness: 71.8<br />prediction_others_willingness: 40.5<br />region: Africa<br />country: Ghana","self_willingness: 83.6<br />prediction_others_willingness: 39.3<br />region: Africa<br />country: Guinea","self_willingness: 79.0<br />prediction_others_willingness: 39.3<br />region: Africa<br />country: Kenya","self_willingness: 70.5<br />prediction_others_willingness: 34.2<br />region: Africa<br />country: Madagascar","self_willingness: 71.3<br />prediction_others_willingness: 39.1<br />region: Africa<br />country: Malawi","self_willingness: 85.9<br />prediction_others_willingness: 42.1<br />region: Africa<br />country: Mali","self_willingness: 85.1<br />prediction_others_willingness: 53.7<br />region: Africa<br />country: Mauritius","self_willingness: 83.0<br />prediction_others_willingness: 54.0<br />region: Africa<br />country: Morocco","self_willingness: 75.8<br />prediction_others_willingness: 41.3<br />region: Africa<br />country: Mozambique","self_willingness: 62.5<br />prediction_others_willingness: 37.1<br />region: Africa<br />country: Namibia","self_willingness: 67.3<br />prediction_others_willingness: 39.4<br />region: Africa<br />country: Nigeria","self_willingness: 78.7<br />prediction_others_willingness: 47.8<br />region: Africa<br />country: Senegal","self_willingness: 82.9<br />prediction_others_willingness: 44.2<br />region: Africa<br />country: Sierra Leone","self_willingness: 54.2<br />prediction_others_willingness: 34.1<br />region: Africa<br />country: South Africa","self_willingness: 63.7<br />prediction_others_willingness: 45.0<br />region: Africa<br />country: Tanzania","self_willingness: 79.9<br />prediction_others_willingness: 38.6<br />region: Africa<br />country: Togo","self_willingness: 58.4<br />prediction_others_willingness: 36.2<br />region: Africa<br />country: Tunisia","self_willingness: 74.6<br />prediction_others_willingness: 38.1<br />region: Africa<br />country: Uganda","self_willingness: 81.4<br />prediction_others_willingness: 55.2<br />region: Africa<br />country: Zambia","self_willingness: 72.1<br />prediction_others_willingness: 41.7<br />region: Africa<br />country: Zimbabwe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(162,85,155,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(162,85,155,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[82,75.400000000000006,82.599999999999994,87.400000000000006,80.900000000000006,82.5,65.400000000000006,64,80,75.799999999999997,65.400000000000006,37.299999999999997,48.799999999999997,62.299999999999997,45,73,85.299999999999997,59.399999999999999,66.900000000000006,89.599999999999994,92.799999999999997,83,47.399999999999999,80.599999999999994,77.200000000000003,53.100000000000001,70.900000000000006,79.900000000000006,62.399999999999999,78,58.299999999999997,66.400000000000006,81.700000000000003,91.599999999999994,77.099999999999994],"y":[40.5,40.700000000000003,48.700000000000003,54.700000000000003,55.600000000000001,51.299999999999997,30.5,36.100000000000001,43.5,44.299999999999997,38.100000000000001,19.5,24.199999999999999,33.799999999999997,38.200000000000003,53.200000000000003,50.5,40.899999999999999,40,64.400000000000006,60.200000000000003,41.799999999999997,30.699999999999999,49.399999999999999,52.5,35.100000000000001,34.5,47.399999999999999,30.300000000000001,50.899999999999999,46.299999999999997,40.399999999999999,53.899999999999999,62.5,49.899999999999999],"text":["self_willingness: 82.0<br />prediction_others_willingness: 40.5<br />region: Asia<br />country: Afghanistan","self_willingness: 75.4<br />prediction_others_willingness: 40.7<br />region: Asia<br />country: Armenia","self_willingness: 82.6<br />prediction_others_willingness: 48.7<br />region: Asia<br />country: Bangladesh","self_willingness: 87.4<br />prediction_others_willingness: 54.7<br />region: Asia<br />country: Cambodia","self_willingness: 80.9<br />prediction_others_willingness: 55.6<br />region: Asia<br />country: China","self_willingness: 82.5<br />prediction_others_willingness: 51.3<br />region: Asia<br />country: Georgia","self_willingness: 65.4<br />prediction_others_willingness: 30.5<br />region: Asia<br />country: Hong Kong","self_willingness: 64.0<br />prediction_others_willingness: 36.1<br />region: Asia<br />country: India","self_willingness: 80.0<br />prediction_others_willingness: 43.5<br />region: Asia<br />country: Indonesia","self_willingness: 75.8<br />prediction_others_willingness: 44.3<br />region: Asia<br />country: Iran","self_willingness: 65.4<br />prediction_others_willingness: 38.1<br />region: Asia<br />country: Iraq","self_willingness: 37.3<br />prediction_others_willingness: 19.5<br />region: Asia<br />country: Israel","self_willingness: 48.8<br />prediction_others_willingness: 24.2<br />region: Asia<br />country: Japan","self_willingness: 62.3<br />prediction_others_willingness: 33.8<br />region: Asia<br />country: Jordan","self_willingness: 45.0<br />prediction_others_willingness: 38.2<br />region: Asia<br />country: Kazakhstan","self_willingness: 73.0<br />prediction_others_willingness: 53.2<br />region: Asia<br />country: Kyrgyzstan","self_willingness: 85.3<br />prediction_others_willingness: 50.5<br />region: Asia<br />country: Laos","self_willingness: 59.4<br />prediction_others_willingness: 40.9<br />region: Asia<br />country: Lebanon","self_willingness: 66.9<br />prediction_others_willingness: 40.0<br />region: Asia<br />country: Malaysia","self_willingness: 89.6<br />prediction_others_willingness: 64.4<br />region: Asia<br />country: Mongolia","self_willingness: 92.8<br />prediction_others_willingness: 60.2<br />region: Asia<br />country: Myanmar","self_willingness: 83.0<br />prediction_others_willingness: 41.8<br />region: Asia<br />country: Nepal","self_willingness: 47.4<br />prediction_others_willingness: 30.7<br />region: Asia<br />country: Pakistan","self_willingness: 80.6<br />prediction_others_willingness: 49.4<br />region: Asia<br />country: Philippines","self_willingness: 77.2<br />prediction_others_willingness: 52.5<br />region: Asia<br />country: Saudi Arabia","self_willingness: 53.1<br />prediction_others_willingness: 35.1<br />region: Asia<br />country: Singapore","self_willingness: 70.9<br />prediction_others_willingness: 34.5<br />region: Asia<br />country: South Korea","self_willingness: 79.9<br />prediction_others_willingness: 47.4<br />region: Asia<br />country: Sri Lanka","self_willingness: 62.4<br />prediction_others_willingness: 30.3<br />region: Asia<br />country: Taiwan","self_willingness: 78.0<br />prediction_others_willingness: 50.9<br />region: Asia<br />country: Tajikistan","self_willingness: 58.3<br />prediction_others_willingness: 46.3<br />region: Asia<br />country: Thailand","self_willingness: 66.4<br />prediction_others_willingness: 40.4<br />region: Asia<br />country: Turkey","self_willingness: 81.7<br />prediction_others_willingness: 53.9<br />region: Asia<br />country: United Arab Emirates","self_willingness: 91.6<br />prediction_others_willingness: 62.5<br />region: Asia<br />country: Uzbekistan","self_willingness: 77.1<br />prediction_others_willingness: 49.9<br />region: Asia<br />country: Vietnam"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,132,125,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,132,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[71.299999999999997,72.700000000000003,61.399999999999999,81.700000000000003,70.400000000000006,70,76.400000000000006,54.899999999999999,72,53.700000000000003,54.600000000000001,51.100000000000001,67.900000000000006,77.799999999999997,73.200000000000003,71.799999999999997,65,63.700000000000003,84.200000000000003,54.5,40.600000000000001,68.5,65.099999999999994,65.599999999999994,76.5,67.099999999999994,64.200000000000003,58,69.400000000000006,41,76.299999999999997,67.799999999999997,76.099999999999994,65.099999999999994,71.799999999999997,67.799999999999997,59.399999999999999,47.600000000000001],"y":[43.799999999999997,37.899999999999999,37.700000000000003,41,33,36.700000000000003,37.5,32.299999999999997,46.299999999999997,36,36.200000000000003,38.5,39.5,36,36.899999999999999,43.600000000000001,37.299999999999997,39,48,31,25.800000000000001,40.700000000000003,39.5,41.899999999999999,40.899999999999999,41.700000000000003,37.899999999999999,40.5,32.700000000000003,29.399999999999999,37.799999999999997,33.299999999999997,44.299999999999997,40.600000000000001,43.600000000000001,41.299999999999997,32.5,37.200000000000003],"text":["self_willingness: 71.3<br />prediction_others_willingness: 43.8<br />region: Europe<br />country: Albania","self_willingness: 72.7<br />prediction_others_willingness: 37.9<br />region: Europe<br />country: Austria","self_willingness: 61.4<br />prediction_others_willingness: 37.7<br />region: Europe<br />country: Belgium","self_willingness: 81.7<br />prediction_others_willingness: 41.0<br />region: Europe<br />country: Bosnia and Herzegovina","self_willingness: 70.4<br />prediction_others_willingness: 33.0<br />region: Europe<br />country: Bulgaria","self_willingness: 70.0<br />prediction_others_willingness: 36.7<br />region: Europe<br />country: Croatia","self_willingness: 76.4<br />prediction_others_willingness: 37.5<br />region: Europe<br />country: Cyprus","self_willingness: 54.9<br />prediction_others_willingness: 32.3<br />region: Europe<br />country: Czechia","self_willingness: 72.0<br />prediction_others_willingness: 46.3<br />region: Europe<br />country: Denmark","self_willingness: 53.7<br />prediction_others_willingness: 36.0<br />region: Europe<br />country: Estonia","self_willingness: 54.6<br />prediction_others_willingness: 36.2<br />region: Europe<br />country: Finland","self_willingness: 51.1<br />prediction_others_willingness: 38.5<br />region: Europe<br />country: France","self_willingness: 67.9<br />prediction_others_willingness: 39.5<br />region: Europe<br />country: Germany","self_willingness: 77.8<br />prediction_others_willingness: 36.0<br />region: Europe<br />country: Greece","self_willingness: 73.2<br />prediction_others_willingness: 36.9<br />region: Europe<br />country: Hungary","self_willingness: 71.8<br />prediction_others_willingness: 43.6<br />region: Europe<br />country: Iceland","self_willingness: 65.0<br />prediction_others_willingness: 37.3<br />region: Europe<br />country: Ireland","self_willingness: 63.7<br />prediction_others_willingness: 39.0<br />region: Europe<br />country: Italy","self_willingness: 84.2<br />prediction_others_willingness: 48.0<br />region: Europe<br />country: Kosovo","self_willingness: 54.5<br />prediction_others_willingness: 31.0<br />region: Europe<br />country: Latvia","self_willingness: 40.6<br />prediction_others_willingness: 25.8<br />region: Europe<br />country: Lithuania","self_willingness: 68.5<br />prediction_others_willingness: 40.7<br />region: Europe<br />country: Malta","self_willingness: 65.1<br />prediction_others_willingness: 39.5<br />region: Europe<br />country: Moldova","self_willingness: 65.6<br />prediction_others_willingness: 41.9<br />region: Europe<br />country: Netherlands","self_willingness: 76.5<br />prediction_others_willingness: 40.9<br />region: Europe<br />country: North Macedonia","self_willingness: 67.1<br />prediction_others_willingness: 41.7<br />region: Europe<br />country: Norway","self_willingness: 64.2<br />prediction_others_willingness: 37.9<br />region: Europe<br />country: Poland","self_willingness: 58.0<br />prediction_others_willingness: 40.5<br />region: Europe<br />country: Portugal","self_willingness: 69.4<br />prediction_others_willingness: 32.7<br />region: Europe<br />country: Romania","self_willingness: 41.0<br />prediction_others_willingness: 29.4<br />region: Europe<br />country: Russia","self_willingness: 76.3<br />prediction_others_willingness: 37.8<br />region: Europe<br />country: Serbia","self_willingness: 67.8<br />prediction_others_willingness: 33.3<br />region: Europe<br />country: Slovakia","self_willingness: 76.1<br />prediction_others_willingness: 44.3<br />region: Europe<br />country: Slovenia","self_willingness: 65.1<br />prediction_others_willingness: 40.6<br />region: Europe<br />country: Spain","self_willingness: 71.8<br />prediction_others_willingness: 43.6<br />region: Europe<br />country: Sweden","self_willingness: 67.8<br />prediction_others_willingness: 41.3<br />region: Europe<br />country: Switzerland","self_willingness: 59.4<br />prediction_others_willingness: 32.5<br />region: Europe<br />country: Ukraine","self_willingness: 47.6<br />prediction_others_willingness: 37.2<br />region: Europe<br />country: United Kingdom"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(75,106,156,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(75,106,156,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[48.700000000000003,80.700000000000003,82.700000000000003,72.900000000000006,72,58.799999999999997,69.900000000000006,75.400000000000006,81.200000000000003,72,48.100000000000001],"y":[34.200000000000003,44.5,43.299999999999997,43.299999999999997,41.399999999999999,41.399999999999999,34.5,41.600000000000001,46.200000000000003,38.5,33.200000000000003],"text":["self_willingness: 48.7<br />prediction_others_willingness: 34.2<br />region: North America<br />country: Canada","self_willingness: 80.7<br />prediction_others_willingness: 44.5<br />region: North America<br />country: Costa Rica","self_willingness: 82.7<br />prediction_others_willingness: 43.3<br />region: North America<br />country: Dominican Republic","self_willingness: 72.9<br />prediction_others_willingness: 43.3<br />region: North America<br />country: El Salvador","self_willingness: 72.0<br />prediction_others_willingness: 41.4<br />region: North America<br />country: Guatemala","self_willingness: 58.8<br />prediction_others_willingness: 41.4<br />region: North America<br />country: Honduras","self_willingness: 69.9<br />prediction_others_willingness: 34.5<br />region: North America<br />country: Jamaica","self_willingness: 75.4<br />prediction_others_willingness: 41.6<br />region: North America<br />country: Mexico","self_willingness: 81.2<br />prediction_others_willingness: 46.2<br />region: North America<br />country: Nicaragua","self_willingness: 72.0<br />prediction_others_willingness: 38.5<br />region: North America<br />country: Panama","self_willingness: 48.1<br />prediction_others_willingness: 33.2<br />region: North America<br />country: United States"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(229,110,89,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(229,110,89,1)"}},"hoveron":"points","name":"North America","legendgroup":"North America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[56.100000000000001,46.399999999999999],"y":[38.600000000000001,35.899999999999999],"text":["self_willingness: 56.1<br />prediction_others_willingness: 38.6<br />region: Oceania<br />country: Australia","self_willingness: 46.4<br />prediction_others_willingness: 35.9<br />region: Oceania<br />country: New Zealand"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(56,170,186,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(56,170,186,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[62.200000000000003,84.599999999999994,67.299999999999997,64.900000000000006,77.400000000000006,77.599999999999994,85.799999999999997,77.200000000000003,65.5,85],"y":[38.100000000000001,44,42.600000000000001,36,50.100000000000001,44.200000000000003,47.5,40.5,40.399999999999999,45.399999999999999],"text":["self_willingness: 62.2<br />prediction_others_willingness: 38.1<br />region: South America<br />country: Argentina","self_willingness: 84.6<br />prediction_others_willingness: 44.0<br />region: South America<br />country: Bolivia","self_willingness: 67.3<br />prediction_others_willingness: 42.6<br />region: South America<br />country: Brazil","self_willingness: 64.9<br />prediction_others_willingness: 36.0<br />region: South America<br />country: Chile","self_willingness: 77.4<br />prediction_others_willingness: 50.1<br />region: South America<br />country: Colombia","self_willingness: 77.6<br />prediction_others_willingness: 44.2<br />region: South America<br />country: Ecuador","self_willingness: 85.8<br />prediction_others_willingness: 47.5<br />region: South America<br />country: Paraguay","self_willingness: 77.2<br />prediction_others_willingness: 40.5<br />region: South America<br />country: Peru","self_willingness: 65.5<br />prediction_others_willingness: 40.4<br />region: South America<br />country: Uruguay","self_willingness: 85.0<br />prediction_others_willingness: 45.4<br />region: South America<br />country: Venezuela"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(136,48,57,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(136,48,57,1)"}},"hoveron":"points","name":"South America","legendgroup":"South America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,100],"y":[0,100],"text":"intercept: 0<br />slope: 1","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(190,190,190,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":48.949771689497723},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"People underestimate others' willingness to take climate action","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,100],"tickmode":"array","ticktext":["0%","20%","40%","60%","80%","100%"],"tickvals":[0,20,40,60,80,100],"categoryorder":"array","categoryarray":["0%","20%","40%","60%","80%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Actual share who said they were willing to give 1% of their income","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,100],"tickmode":"array","ticktext":["0%","20%","40%","60%","80%","100%"],"tickvals":[0,20,40,60,80,100],"categoryorder":"array","categoryarray":["0%","20%","40%","60%","80%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Predicted share willing to give","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"region","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"19716b66e753":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"197130dd313b":{"intercept":{},"slope":{}}},"cur_data":"19716b66e753","visdat":{"19716b66e753":["function (y) ","x"],"197130dd313b":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/jenrichmond\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024 Jen Richmond</p>
</div>   
    <div class="nav-footer-center">
<p><a class="link-dark me-1" href="https://github.com/jenrichmond" title="github" target="_blank" rel="noopener"><iconify-icon role="img" inline="" icon="fa6-brands:github" aria-label="Icon github from fa6-brands Iconify.design set." title="Icon github from fa6-brands Iconify.design set."></iconify-icon></a> <a class="link-dark me-1" href="https://www.linkedin.com/in/jenrichmondphd/" title="LinkedIn" target="_blank" rel="noopener"><iconify-icon role="img" inline="" icon="fa6-brands:linkedin" aria-label="Icon linkedin from fa6-brands Iconify.design set." title="Icon linkedin from fa6-brands Iconify.design set."></iconify-icon></a> <a class="link-dark me-1" href="https://bsky.app/profile/jenrichmondphd.bsky.social" title="Bluesky" target="_blank" rel="noopener"><iconify-icon role="img" inline="" icon="fa6-brands:bluesky" aria-label="Icon bluesky from fa6-brands Iconify.design set." title="Icon bluesky from fa6-brands Iconify.design set."></iconify-icon></a></p>
</div>
    <div class="nav-footer-right">
<p><a class="link-dark me-1" href="https://github.com/jenrichmond/jenrichmond.github.io"><iconify-icon role="img" inline="" icon="fa6-brands:github" aria-label="Icon github from fa6-brands Iconify.design set." title="Icon github from fa6-brands Iconify.design set."></iconify-icon> Source</a></p>
</div>
  </div>
</footer>




</body></html>